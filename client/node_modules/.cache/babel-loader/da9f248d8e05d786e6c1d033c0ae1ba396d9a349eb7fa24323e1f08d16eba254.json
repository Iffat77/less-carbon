{"ast":null,"code":"var _jsxFileName = \"/Users/iffathossain/iffatdev/projects/less-carbon/client/src/components/Likes.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { createLike, deleteLike, getLikesForArticle } from \"../services/likes.js\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Likes(_ref) {\n  _s();\n  let {\n    articleId,\n    user\n  } = _ref;\n  const [likes, setLikes] = useState([]);\n  const [likeId, setLikeId] = useState(null);\n  const [isLiked, setIsLiked] = useState(false);\n  useEffect(() => {\n    const fetchLikes = async () => {\n      try {\n        const likesData = await getLikesForArticle(articleId);\n        setLikes(likesData);\n        const likedByUser = likesData.some(like => like.user === (user === null || user === void 0 ? void 0 : user._id));\n        const userLike = likesData.find(like => like.user === (user === null || user === void 0 ? void 0 : user._id));\n        setLikeId(userLike._id || null);\n        console.log(userLike._id);\n        setIsLiked(likedByUser);\n      } catch (error) {\n        console.error(\"Error fetching likes:\", error);\n      }\n    };\n    if (user) {\n      fetchLikes();\n    }\n  }, [articleId, user]);\n  const handleLike = async () => {\n    if (isLiked) {\n      try {\n        if (likeId) {\n          await deleteLike(likeId);\n          setLikeId(null);\n        }\n        setIsLiked(false);\n        setLikes(prevLikes => prevLikes.filter(like => like.user !== user._id));\n      } catch (error) {\n        console.error(\"Error deleting like:\", error);\n      }\n    } else {\n      try {\n        const newLike = await createLike(articleId, user === null || user === void 0 ? void 0 : user._id);\n        setIsLiked(true);\n        setLikeId(newLike._id);\n        setLikes(prevLikes => [...prevLikes, newLike]);\n      } catch (error) {\n        console.error(\"Error creating like:\", error);\n      }\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLike,\n      children: isLiked ? \"Unlike\" : \"Like\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: [likes.length, \" Likes\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 56,\n    columnNumber: 5\n  }, this);\n}\n_s(Likes, \"QE4/WB70PxGZPlRKI/pgpNo9pA8=\");\n_c = Likes;\nexport default Likes;\nvar _c;\n$RefreshReg$(_c, \"Likes\");","map":{"version":3,"names":["React","useEffect","useState","createLike","deleteLike","getLikesForArticle","jsxDEV","_jsxDEV","Likes","_ref","_s","articleId","user","likes","setLikes","likeId","setLikeId","isLiked","setIsLiked","fetchLikes","likesData","likedByUser","some","like","_id","userLike","find","console","log","error","handleLike","prevLikes","filter","newLike","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","length","_c","$RefreshReg$"],"sources":["/Users/iffathossain/iffatdev/projects/less-carbon/client/src/components/Likes.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { createLike, deleteLike, getLikesForArticle } from \"../services/likes.js\";\n\nfunction Likes({ articleId, user }) {\n  const [likes, setLikes] = useState([]);\n  const [likeId, setLikeId] = useState(null);\n  const [isLiked, setIsLiked] = useState(false);\n\n  useEffect(() => {\n    const fetchLikes = async () => {\n      try {\n        const likesData = await getLikesForArticle(articleId);\n        setLikes(likesData);\n        const likedByUser = likesData.some((like) => like.user === user?._id);\n        const userLike = likesData.find((like) => like.user === user?._id);\n        setLikeId(userLike._id || null);\n        console.log(userLike._id)\n        setIsLiked(likedByUser);\n      } catch (error) {\n        console.error(\"Error fetching likes:\", error);\n      }\n    };\n\n    if (user) {\n      fetchLikes();\n    }\n  }, [articleId, user]);\n\n  const handleLike = async () => {\n    if (isLiked) {\n      try {\n        if (likeId) {\n          await deleteLike(likeId);\n          setLikeId(null);\n        }\n        setIsLiked(false);\n        setLikes((prevLikes) =>\n          prevLikes.filter((like) => like.user !== user._id)\n        );\n      } catch (error) {\n        console.error(\"Error deleting like:\", error);\n      }\n    } else {\n      try {\n        const newLike = await createLike(articleId, user?._id);\n        setIsLiked(true);\n        setLikeId(newLike._id);\n        setLikes((prevLikes) => [...prevLikes, newLike]);\n      } catch (error) {\n        console.error(\"Error creating like:\", error);\n      }\n    }\n  };\n\n  return (\n    <div>\n      <button onClick={handleLike}>{isLiked ? \"Unlike\" : \"Like\"}</button>\n      <span>{likes.length} Likes</span>\n    </div>\n  );\n}\n\nexport default Likes;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}